[2026-02-20 13:43:09 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 13:43:10 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 13:43:10 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 13:43:10 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-20 13:43:33 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:33 INF] User wdelcid registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"e107486a-063c-4ece-94c9-7f5bbfa35e2e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:33 INF] HTTP POST /api/v1/auth/register responded 201 in 719.7698 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN1ABQ2U9:00000001","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:34 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"e107486a-063c-4ece-94c9-7f5bbfa35e2e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:35 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"e107486a-063c-4ece-94c9-7f5bbfa35e2e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:35 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"e107486a-063c-4ece-94c9-7f5bbfa35e2e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:35 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"e107486a-063c-4ece-94c9-7f5bbfa35e2e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:43:35 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"e107486a-063c-4ece-94c9-7f5bbfa35e2e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN1ABQ2U9:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN1ABQ2U9"}
[2026-02-20 13:49:35 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 13:49:35 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 13:49:35 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 13:49:35 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-20 13:49:42 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJGN4OEVL21:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL21"}
[2026-02-20 13:49:42 WRN] Registration rejected: email already exists {"EventId":{"Id":1004,"Name":"LogRegistrationWithExistingEmail"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL21:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL21"}
[2026-02-20 13:49:42 ERR] An unhandled exception occurred {"SourceContext":"AuthService.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJGN4OEVL21:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL21"}
AuthService.Application.Exceptions.BusinessException: Email already exists
   at AuthService.Application.Services.AuthService.RegisterAsync(RegisterDto registerDto) in C:\Users\Informatica\Documents\IN6AV\Gestor de opiniones\authentication-service\auth-service\src\AuthService.Application\Services\AuthService.cs:line 33
   at AuthService.Api.Controllers.AuthController.Register(RegisterDto registerDto) in C:\Users\Informatica\Documents\IN6AV\Gestor de opiniones\authentication-service\auth-service\src\AuthService.Api\Controllers\AuthController.cs:line 73
   at lambda_method22(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\Informatica\Documents\IN6AV\Gestor de opiniones\authentication-service\auth-service\src\AuthService.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-20 13:49:42 INF] HTTP POST /api/v1/auth/register responded 400 in 201.9979 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN4OEVL21:00000001","ConnectionId":"0HNJGN4OEVL21"}
[2026-02-20 13:55:03 WRN] Registration rejected: username already exists {"EventId":{"Id":1005,"Name":"LogRegistrationWithExistingUsername"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:03 ERR] An unhandled exception occurred {"SourceContext":"AuthService.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJGN4OEVL23:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
AuthService.Application.Exceptions.BusinessException: Username already exists
   at AuthService.Application.Services.AuthService.RegisterAsync(RegisterDto registerDto) in C:\Users\Informatica\Documents\IN6AV\Gestor de opiniones\authentication-service\auth-service\src\AuthService.Application\Services\AuthService.cs:line 40
   at AuthService.Api.Controllers.AuthController.Register(RegisterDto registerDto) in C:\Users\Informatica\Documents\IN6AV\Gestor de opiniones\authentication-service\auth-service\src\AuthService.Api\Controllers\AuthController.cs:line 73
   at lambda_method22(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\Informatica\Documents\IN6AV\Gestor de opiniones\authentication-service\auth-service\src\AuthService.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-20 13:55:03 INF] HTTP POST /api/v1/auth/register responded 400 in 64.7760 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN4OEVL23:00000001","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:10 INF] User adelcid registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:10 INF] HTTP POST /api/v1/auth/register responded 201 in 461.1297 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN4OEVL23:00000002","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:10 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:12 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:12 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:12 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:55:12 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"34079c0c-e19d-4c22-b6d7-91dfef781e82","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:56:31 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"21c6dca0-ec21-4a68-8f00-5be48c7183d8","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:56:32 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"21c6dca0-ec21-4a68-8f00-5be48c7183d8","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:56:32 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"21c6dca0-ec21-4a68-8f00-5be48c7183d8","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:56:32 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"21c6dca0-ec21-4a68-8f00-5be48c7183d8","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:56:32 INF] Email verified successfully for user adelcid {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"21c6dca0-ec21-4a68-8f00-5be48c7183d8","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:56:32 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 1131.7683 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN4OEVL23:00000003","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:58:26 INF] User login succeeded {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"5a8b0d05-f903-48d4-90de-063ec053c030","ActionName":"AuthService.Api.Controllers.AuthController.Login (AuthService.Api)","RequestId":"0HNJGN4OEVL23:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJGN4OEVL23"}
[2026-02-20 13:58:26 INF] HTTP POST /api/v1/auth/login responded 200 in 319.8650 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN4OEVL23:00000004","ConnectionId":"0HNJGN4OEVL23"}

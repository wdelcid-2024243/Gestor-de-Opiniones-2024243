[2026-02-14 02:17:22 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 02:17:24 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-14 02:17:24 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-14 02:17:24 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-14 02:25:25 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 02:25:26 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-14 02:25:27 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-14 02:25:27 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-14 11:34:30 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 11:34:35 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5436
 ---> System.Net.Sockets.SocketException (10061): No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 148
[2026-02-14 11:36:10 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 11:36:11 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-14 11:36:11 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-14 11:36:11 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-14 11:46:56 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJBU45NJ333:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU45NJ333"}
[2026-02-14 11:47:06 INF] HTTP POST /api/v1/auth/register responded 400 in 10200.1134 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBU45NJ333:00000001","ConnectionId":"0HNJBU45NJ333"}
[2026-02-14 11:47:45 INF] User wdelcid registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"6a6fbcc3-7358-4a22-87b5-21639f6c7b44","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU45NJ333:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU45NJ333"}
[2026-02-14 11:47:45 INF] HTTP POST /api/v1/auth/register responded 201 in 5890.6627 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBU45NJ333:00000002","ConnectionId":"0HNJBU45NJ333"}
[2026-02-14 11:47:45 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6a6fbcc3-7358-4a22-87b5-21639f6c7b44","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU45NJ333:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU45NJ333"}
[2026-02-14 11:47:46 ERR] La autenticación de Gmail falló. Verifica la contraseña de aplicación. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6a6fbcc3-7358-4a22-87b5-21639f6c7b44","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU45NJ333:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU45NJ333"}
MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at AuthService.Application.Services.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 153
[2026-02-14 11:47:46 ERR] Error al enviar el email {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6a6fbcc3-7358-4a22-87b5-21639f6c7b44","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU45NJ333:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU45NJ333"}
System.InvalidOperationException: La autenticación de Gmail falló: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp. Por favor, verifica la contraseña de aplicación.
 ---> MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at AuthService.Application.Services.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 153
   --- End of inner exception stack trace ---
   at AuthService.Application.Services.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 172
[2026-02-14 11:47:47 ERR] Failed to send verification email {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"6a6fbcc3-7358-4a22-87b5-21639f6c7b44","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU45NJ333:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU45NJ333"}
System.InvalidOperationException: Error al enviar el email: La autenticación de Gmail falló: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp. Por favor, verifica la contraseña de aplicación.
 ---> System.InvalidOperationException: La autenticación de Gmail falló: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp. Por favor, verifica la contraseña de aplicación.
 ---> MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials a1e0cc1a2514c-94afd1ab72bsm5466849241.5 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at AuthService.Application.Services.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 153
   --- End of inner exception stack trace ---
   at AuthService.Application.Services.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 172
   --- End of inner exception stack trace ---
   at AuthService.Application.Services.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 193
   at AuthService.Application.Services.EmailService.SendEmailVerificationAsync(String email, String username, String token) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\EmailService.cs:line 31
   at AuthService.Application.Services.AuthService.<>c__DisplayClass9_0.<<RegisterAsync>b__0>d.MoveNext() in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\AuthService.cs:line 139
[2026-02-14 11:55:35 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 11:55:36 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-14 11:55:36 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-14 11:55:37 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-14 11:56:18 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:23 INF] User adelcid registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"f8d70aeb-4f71-4509-bb5b-c6bb838265e7","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:23 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"f8d70aeb-4f71-4509-bb5b-c6bb838265e7","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:23 INF] HTTP POST /api/v1/auth/register responded 201 in 5555.5916 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBU9DBLH4U:00000001","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:25 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"f8d70aeb-4f71-4509-bb5b-c6bb838265e7","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:25 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"f8d70aeb-4f71-4509-bb5b-c6bb838265e7","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:25 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"f8d70aeb-4f71-4509-bb5b-c6bb838265e7","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:56:25 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"f8d70aeb-4f71-4509-bb5b-c6bb838265e7","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBU9DBLH4U:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBU9DBLH4U"}
[2026-02-14 11:58:39 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"0ac318af-199b-4a43-9049-1f8e730102b7","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBU9DBLH50:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBU9DBLH50"}
[2026-02-14 11:58:41 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"0ac318af-199b-4a43-9049-1f8e730102b7","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBU9DBLH50:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBU9DBLH50"}
[2026-02-14 11:58:41 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"0ac318af-199b-4a43-9049-1f8e730102b7","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBU9DBLH50:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBU9DBLH50"}
[2026-02-14 11:58:41 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"0ac318af-199b-4a43-9049-1f8e730102b7","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBU9DBLH50:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBU9DBLH50"}
[2026-02-14 11:58:41 INF] Email verified successfully for user adelcid {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"0ac318af-199b-4a43-9049-1f8e730102b7","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBU9DBLH50:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBU9DBLH50"}
[2026-02-14 11:58:41 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 2287.2242 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBU9DBLH50:00000001","ConnectionId":"0HNJBU9DBLH50"}
[2026-02-14 12:07:20 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 12:07:21 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-14 12:07:21 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-14 12:07:21 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-14 12:08:05 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJBUG065997:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:08:06 WRN] Registration rejected: email already exists {"EventId":{"Id":1004,"Name":"LogRegistrationWithExistingEmail"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:08:06 ERR] An unhandled exception occurred {"SourceContext":"AuthService.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJBUG065997:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
AuthService.Application.Exceptions.BusinessException: Email already exists
   at AuthService.Application.Services.AuthService.RegisterAsync(RegisterDto registerDto) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Application\Services\AuthService.cs:line 33
   at AuthService.Api.Controllers.AuthController.Register(RegisterDto registerDto) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Api\Controllers\AuthController.cs:line 73
   at lambda_method22(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\wendy\OneDrive\Documentos\IN6AV\Banco 33\authentication-service\auth-service\src\AuthService.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-14 12:08:06 INF] HTTP POST /api/v1/auth/register responded 400 in 962.1319 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBUG065997:00000001","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:03 INF] User wpasan registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:03 INF] HTTP POST /api/v1/auth/register responded 201 in 5575.0933 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBUG065997:00000002","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:03 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:06 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:06 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:06 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:06 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065997:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:56 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG065997:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:57 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG065997:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:57 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG065997:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:57 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG065997:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:57 INF] Email verified successfully for user wpasan {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG065997:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:09:57 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 1783.1257 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBUG065997:00000003","ConnectionId":"0HNJBUG065997"}
[2026-02-14 12:12:06 INF] User sdelcid registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065999:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:12:06 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065999:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:12:06 INF] HTTP POST /api/v1/auth/register responded 201 in 2302.9843 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBUG065999:00000001","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:12:07 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065999:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:12:07 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065999:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:12:07 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065999:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:12:07 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c8de0aa3-5597-455f-ac5b-aa6f143d50fc","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBUG065999:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBUG065999"}
[2026-02-14 12:15:59 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG06599B:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG06599B"}
[2026-02-14 12:16:00 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG06599B:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG06599B"}
[2026-02-14 12:16:00 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG06599B:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG06599B"}
[2026-02-14 12:16:00 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG06599B:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG06599B"}
[2026-02-14 12:16:00 INF] Email verified successfully for user sdelcid {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c60b5b6a-6c48-4e08-b693-98e5181bb733","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBUG06599B:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBUG06599B"}
[2026-02-14 12:16:00 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 1854.5147 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBUG06599B:00000001","ConnectionId":"0HNJBUG06599B"}
[2026-02-14 12:17:50 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-14 12:17:53 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-14 12:17:54 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-14 12:17:55 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-14 12:18:45 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:51 INF] User bargueta registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"5a746af6-d82a-4819-aa1e-e3fadb27f8f0","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:51 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"5a746af6-d82a-4819-aa1e-e3fadb27f8f0","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:51 INF] HTTP POST /api/v1/auth/register responded 201 in 6430.3296 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBULUO24QR:00000001","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:53 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"5a746af6-d82a-4819-aa1e-e3fadb27f8f0","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:53 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"5a746af6-d82a-4819-aa1e-e3fadb27f8f0","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:53 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"5a746af6-d82a-4819-aa1e-e3fadb27f8f0","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:18:53 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"5a746af6-d82a-4819-aa1e-e3fadb27f8f0","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJBULUO24QR:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJBULUO24QR"}
[2026-02-14 12:19:46 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"a39911a5-878b-4266-a81c-8f542be81189","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBULUO24QT:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBULUO24QT"}
[2026-02-14 12:19:47 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"a39911a5-878b-4266-a81c-8f542be81189","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBULUO24QT:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBULUO24QT"}
[2026-02-14 12:19:47 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"a39911a5-878b-4266-a81c-8f542be81189","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBULUO24QT:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBULUO24QT"}
[2026-02-14 12:19:47 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"a39911a5-878b-4266-a81c-8f542be81189","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBULUO24QT:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBULUO24QT"}
[2026-02-14 12:19:47 INF] Email verified successfully for user bargueta {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"a39911a5-878b-4266-a81c-8f542be81189","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJBULUO24QT:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJBULUO24QT"}
[2026-02-14 12:19:47 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 2209.2804 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJBULUO24QT:00000001","ConnectionId":"0HNJBULUO24QT"}
